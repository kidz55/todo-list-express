(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{231:function(e,t,a){e.exports=a(260)},257:function(e,t,a){var s={"./af":74,"./af.js":74,"./ar":75,"./ar-dz":76,"./ar-dz.js":76,"./ar-kw":77,"./ar-kw.js":77,"./ar-ly":78,"./ar-ly.js":78,"./ar-ma":79,"./ar-ma.js":79,"./ar-sa":80,"./ar-sa.js":80,"./ar-tn":81,"./ar-tn.js":81,"./ar.js":75,"./az":82,"./az.js":82,"./be":83,"./be.js":83,"./bg":84,"./bg.js":84,"./bm":85,"./bm.js":85,"./bn":86,"./bn-bd":87,"./bn-bd.js":87,"./bn.js":86,"./bo":88,"./bo.js":88,"./br":89,"./br.js":89,"./bs":90,"./bs.js":90,"./ca":91,"./ca.js":91,"./cs":92,"./cs.js":92,"./cv":93,"./cv.js":93,"./cy":94,"./cy.js":94,"./da":95,"./da.js":95,"./de":96,"./de-at":97,"./de-at.js":97,"./de-ch":98,"./de-ch.js":98,"./de.js":96,"./dv":99,"./dv.js":99,"./el":100,"./el.js":100,"./en-au":101,"./en-au.js":101,"./en-ca":102,"./en-ca.js":102,"./en-gb":103,"./en-gb.js":103,"./en-ie":104,"./en-ie.js":104,"./en-il":105,"./en-il.js":105,"./en-in":106,"./en-in.js":106,"./en-nz":107,"./en-nz.js":107,"./en-sg":108,"./en-sg.js":108,"./eo":109,"./eo.js":109,"./es":110,"./es-do":111,"./es-do.js":111,"./es-mx":112,"./es-mx.js":112,"./es-us":113,"./es-us.js":113,"./es.js":110,"./et":114,"./et.js":114,"./eu":115,"./eu.js":115,"./fa":116,"./fa.js":116,"./fi":117,"./fi.js":117,"./fil":118,"./fil.js":118,"./fo":119,"./fo.js":119,"./fr":120,"./fr-ca":121,"./fr-ca.js":121,"./fr-ch":122,"./fr-ch.js":122,"./fr.js":120,"./fy":123,"./fy.js":123,"./ga":124,"./ga.js":124,"./gd":125,"./gd.js":125,"./gl":126,"./gl.js":126,"./gom-deva":127,"./gom-deva.js":127,"./gom-latn":128,"./gom-latn.js":128,"./gu":129,"./gu.js":129,"./he":130,"./he.js":130,"./hi":131,"./hi.js":131,"./hr":132,"./hr.js":132,"./hu":133,"./hu.js":133,"./hy-am":134,"./hy-am.js":134,"./id":135,"./id.js":135,"./is":136,"./is.js":136,"./it":137,"./it-ch":138,"./it-ch.js":138,"./it.js":137,"./ja":139,"./ja.js":139,"./jv":140,"./jv.js":140,"./ka":141,"./ka.js":141,"./kk":142,"./kk.js":142,"./km":143,"./km.js":143,"./kn":144,"./kn.js":144,"./ko":145,"./ko.js":145,"./ku":146,"./ku.js":146,"./ky":147,"./ky.js":147,"./lb":148,"./lb.js":148,"./lo":149,"./lo.js":149,"./lt":150,"./lt.js":150,"./lv":151,"./lv.js":151,"./me":152,"./me.js":152,"./mi":153,"./mi.js":153,"./mk":154,"./mk.js":154,"./ml":155,"./ml.js":155,"./mn":156,"./mn.js":156,"./mr":157,"./mr.js":157,"./ms":158,"./ms-my":159,"./ms-my.js":159,"./ms.js":158,"./mt":160,"./mt.js":160,"./my":161,"./my.js":161,"./nb":162,"./nb.js":162,"./ne":163,"./ne.js":163,"./nl":164,"./nl-be":165,"./nl-be.js":165,"./nl.js":164,"./nn":166,"./nn.js":166,"./oc-lnc":167,"./oc-lnc.js":167,"./pa-in":168,"./pa-in.js":168,"./pl":169,"./pl.js":169,"./pt":170,"./pt-br":171,"./pt-br.js":171,"./pt.js":170,"./ro":172,"./ro.js":172,"./ru":173,"./ru.js":173,"./sd":174,"./sd.js":174,"./se":175,"./se.js":175,"./si":176,"./si.js":176,"./sk":177,"./sk.js":177,"./sl":178,"./sl.js":178,"./sq":179,"./sq.js":179,"./sr":180,"./sr-cyrl":181,"./sr-cyrl.js":181,"./sr.js":180,"./ss":182,"./ss.js":182,"./sv":183,"./sv.js":183,"./sw":184,"./sw.js":184,"./ta":185,"./ta.js":185,"./te":186,"./te.js":186,"./tet":187,"./tet.js":187,"./tg":188,"./tg.js":188,"./th":189,"./th.js":189,"./tk":190,"./tk.js":190,"./tl-ph":191,"./tl-ph.js":191,"./tlh":192,"./tlh.js":192,"./tr":193,"./tr.js":193,"./tzl":194,"./tzl.js":194,"./tzm":195,"./tzm-latn":196,"./tzm-latn.js":196,"./tzm.js":195,"./ug-cn":197,"./ug-cn.js":197,"./uk":198,"./uk.js":198,"./ur":199,"./ur.js":199,"./uz":200,"./uz-latn":201,"./uz-latn.js":201,"./uz.js":200,"./vi":202,"./vi.js":202,"./x-pseudo":203,"./x-pseudo.js":203,"./yo":204,"./yo.js":204,"./zh-cn":205,"./zh-cn.js":205,"./zh-hk":206,"./zh-hk.js":206,"./zh-mo":207,"./zh-mo.js":207,"./zh-tw":208,"./zh-tw.js":208};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=257},260:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(13),c=a(306),l=a(307),d=a(308),i=a(43),o=a(58),j=a(220);a(209);const m={tasks:{},error:null,status:""};var u=(e=m,t)=>{switch(t.type){case"UPDATE_STATUS":return{...e,status:t.status};case"SET_TASKS":return{...e,tasks:t.tasks.reduce((t,a)=>e.tasks[a.id]?(t[a.id]={...e.tasks[a.id],...a},t):(t[a.id]=a,t),{})};case"REMOVE_TASK":return{...e,tasks:Object.keys(e.tasks).filter(e=>e!==t.task.id).reduce((t,a)=>(t[a]=e.tasks[a],t),{})};case"UPDATE_TASK":return{...e,tasks:{...e.tasks,[t.task.id]:t.task}};case"TASK_REQ_FAILED":return{...e,error:t.error};default:return e}},p=a(12),y=a(210);var b=a.n(y).a.create({baseURL:"https://kidz-todo-list-backend.herokuapp.com/",headers:{Pragma:"no-cache"}});function*E(e){const{filter:t}=e;yield Object(p.c)({type:"UPDATE_STATUS",status:"syncing"});try{let e="/tasks";t&&(e+="?filter="+t);const{data:a}=yield Object(p.b)(b.get,e);yield Object(p.c)({type:"SET_TASKS",tasks:a}),yield Object(p.c)({type:"UPDATE_STATUS",status:"synced"})}catch(e){yield Object(p.c)({type:"TASK_REQ_FAILED",error:e}),yield Object(p.c)({type:"UPDATE_STATUS",status:"error"})}}function*f(e){const{task:t}=e;yield Object(p.c)({type:"UPDATE_STATUS",status:"syncing"});try{yield Object(p.b)(b.put,"/tasks/"+t.id,t),yield Object(p.c)({type:"UPDATE_STATUS",status:"synced"})}catch(e){yield Object(p.c)({type:"TASK_REQ_FAILED",error:e}),yield Object(p.c)({type:"UPDATE_STATUS",status:"error"})}}function*k(e){const{task:t}=e;yield Object(p.c)({type:"UPDATE_STATUS",status:"syncing"});try{yield Object(p.b)(b.post,"/tasks",t),yield Object(p.c)({type:"GET_TASKS"}),yield Object(p.c)({type:"UPDATE_STATUS",status:"synced"})}catch(e){yield Object(p.c)({type:"TASK_REQ_FAILED",error:e}),yield Object(p.c)({type:"UPDATE_STATUS",status:"error"})}}function*T(e){yield Object(p.c)({type:"UPDATE_STATUS",status:"syncing"});const{task:t}=e;try{yield Object(p.b)(b.delete,"/tasks/"+t.id),yield Object(p.c)({type:"UPDATE_STATUS",status:"synced"})}catch(e){yield Object(p.c)({type:"TASK_REQ_FAILED",error:e}),yield Object(p.c)({type:"UPDATE_STATUS",status:"error"})}}function*O(){yield Object(p.d)("GET_TASKS",E)}function*h(){yield Object(p.d)("UPDATE_TASK",f)}function*S(){yield Object(p.d)("ADD_TASK",k)}function*v(){yield Object(p.d)("REMOVE_TASK",T)}function*A(){yield Object(p.a)([O(),h(),v(),S()])}const g=Object(j.a)(),x=[...Object(o.b)({thunk:!1}),g];var _=a(296),U=a(300),D=a(310),w=a(301),z=a(302),N=a(311),L=a(303),K=a(214),P=a.n(K),C=a(213),R=a.n(C),I=a(212),F=a.n(I),M=a(211),Q=a.n(M),G=a(309),V=a(2),q=a.n(V);const J=Object(_.a)(()=>({form:{display:"flex",flexDirection:"column"},textField:{paddingTop:"0.2.rem"}}));var B=({form:e,onUpdate:t,onError:a,isDirty:r})=>{const c=J(),l=Object(s.useMemo)(()=>((e={},t={})=>Object.entries(e).reduce((e,[a,s])=>{if(!t[a])return e;const n=t[a];return e[a]=!n(s),e},{}))(e,{title:e=>(e=>!!e||0===e)(e),deadLine:e=>(e=>!e||q()(e).isValid())(e)&&(e=>!e||q()(e).diff(q()(),"seconds")>0)(e)}),[e]);return Object(s.useEffect)(()=>{const e=Object.values(l).some(e=>e);a(e)},[l,a]),n.a.createElement("form",{autoComplete:"off",className:c.form},n.a.createElement(G.a,{"data-test-text-field-title":!0,placeholder:"Task title",required:!0,className:c.textField,error:l.title&&r,value:e.title,label:"title",onChange:a=>{t({...e,title:a.target.value})}}),n.a.createElement(G.a,{"data-test-text-field-desc":!0,placeholder:"Task description",label:"description",className:c.textField,value:e.description,onChange:a=>{t({...e,description:a.target.value})},multiline:!0,maxRows:4}),n.a.createElement(G.a,{"data-test-text-field-date":!0,id:"datetime-local",label:"Deadline",type:"datetime-local",className:c.textField,error:l.deadLine&&r,value:e.deadLine||"",onChange:a=>{t({...e,deadLine:a.target.value})},InputLabelProps:{shrink:!0}}))};var W=({deadLine:e,onCountdownOver:t})=>{const[a,r]=Object(s.useState)(q()(e).diff(q()(),"seconds"));Object(s.useEffect)(()=>{const t=q()(e);t.diff(q()(),"seconds")>0&&r(t.diff(q()(),"seconds"))},[e]),Object(s.useEffect)(()=>{if(!a)return void t();const e=setInterval(()=>{r(a-1)},1e3);return()=>clearInterval(e)},[a]);const c=Object(s.useMemo)(()=>{if(a<=0)return"expired";const e=q.a.duration(a,"seconds");let t="";return e.days()>0&&(t+=e.days()+"d:"),e.hours()>0&&(t+=e.hours()+"h:"),e.minutes()>0&&(t+=e.minutes()+"m:"),e.seconds()>0&&(t+=e.seconds()+"s"),t},[a]);return n.a.createElement("small",null,a>0?"Time left: "+c:"Expired")};const H=Object(_.a)(()=>({expired:{backgroundColor:"#D3D3D3"},completed:{textDecoration:"line-through"},secondaryActions:{marginLeft:"auto"}}));var X=({task:e,onTaskUpdate:t,onTaskRemove:a})=>{const r=H(),[c,l]=Object(s.useState)(!1),[d,i]=Object(s.useState)(e),[o,j]=Object(s.useState)(!1),[m,u]=Object(s.useState)(!1);Object(s.useEffect)(()=>{i(e)},[e]);const p=()=>{l(!c)},y=Object(s.useMemo)(()=>"expired"===d.status,[d]);return n.a.createElement(w.a,{className:y?r.expired:"",key:d.id,dense:!0,divider:!0,"data-test-item-todo":!0},n.a.createElement(z.a,null,n.a.createElement(D.a,{"data-test-item-checkbox":!0,edge:"start",checked:"completed"===d.status,tabIndex:-1,disableRipple:!0,disabled:y,onChange:()=>{t({...d,status:"completed"===d.status?"incomplete":"completed"})},inputProps:{"aria-labelledby":d.id}})),c?n.a.createElement(B,{"data-text-item-form":!0,form:d,onError:j,isDirty:m,onUpdate:i}):n.a.createElement("div",null,n.a.createElement(N.a,{"data-text-item-text":!0,className:"completed"===d.status?r.completed:"",primary:d.title,secondary:d.description}),!!d.deadLine&&"completed"!==d.status&&n.a.createElement(W,{onCountdownOver:()=>{t({...d,status:"expired"})},deadLine:d.deadLine})),n.a.createElement("div",{className:r.secondaryActions},n.a.createElement(L.a,{"data-text-item-remove":!0,onClick:()=>{a(d)}},n.a.createElement(F.a,null)),n.a.createElement("div",null,!y&&n.a.createElement("div",null,c?n.a.createElement(L.a,{"data-text-item-save":!0,onClick:()=>{u(!0),o||(u(!1),Q()(d,e)||t(d),p())},edge:"end","aria-label":"save"},n.a.createElement(R.a,null)):n.a.createElement(L.a,{"data-text-item-edit":!0,onClick:()=>p(),edge:"end","aria-label":"edit"},n.a.createElement(P.a,null))))))},Y=a(215),Z=a.n(Y);var $=({onTaskAdd:e})=>{const t={title:"",status:"incomplete",description:""},[a,r]=Object(s.useState)(t),[c,l]=Object(s.useState)(!1),[d,i]=Object(s.useState)(!1);return n.a.createElement(w.a,{key:"new-task",dense:!0,autoFocus:!0,"data-test-add-item":!0},n.a.createElement(z.a,null,n.a.createElement(L.a,{"data-test-add-task-button":!0,onClick:()=>{i(!0),c||(e(a),r(t),i(!1))},"aria-label":"add"},n.a.createElement(Z.a,null))),n.a.createElement(B,{"data-test-add-task-form":!0,form:a,onError:l,isDirty:d,onUpdate:r}))},ee=a(216),te=a.n(ee),ae=a(218),se=a.n(ae),ne=a(304),re=a(217),ce=a.n(re);const le=Object(_.a)(()=>({root:{display:"flex",padding:"1rem"},wrapper:{display:"flex",alignContent:"center"},text:{marginLeft:"0.2rem"}}));var de=({status:e})=>{const t=le();return n.a.createElement("div",{className:t.root},(()=>{switch(e){case"syncing":return n.a.createElement("div",{className:t.wrapper},n.a.createElement(ne.a,{size:20}),n.a.createElement("span",{className:t.text},"Syncing"));case"synced":return n.a.createElement("div",{className:t.wrapper},n.a.createElement(te.a,{color:"secondary"}),n.a.createElement("span",{className:t.text},"Synced"));case"unsynced":return n.a.createElement("div",{className:t.wrapper},n.a.createElement(ce.a,{color:"action"}),n.a.createElement("span",{className:t.text},"Unsynced"));case"error":return n.a.createElement("div",{className:t.wrapper},n.a.createElement(se.a,{color:"error"}),n.a.createElement("span",{className:t.text},"Error during syncing"));default:return null}})())};const ie=Object(_.a)(e=>({list:{width:"100%",backgroundColor:e.palette.background.paper},header:{display:"flex",justifyContent:"space-between",alignItems:"center"}}));var oe=()=>{const e=ie(),t=Object(i.c)(e=>Object.values(e.tasks)),a=Object(i.c)(e=>e.status),r=Object(i.b)();Object(s.useEffect)(()=>{r({type:"GET_TASKS"})},[r]);const c=e=>{r({type:"UPDATE_TASK",task:e})},l=e=>{window.confirm("Are you sure you want to delete task?")&&r({type:"REMOVE_TASK",task:e})};return n.a.createElement("div",null,n.a.createElement("div",{className:e.header},n.a.createElement("h1",null,"TODO LIST"),n.a.createElement("div",null,n.a.createElement(D.a,{onChange:e=>{const t=e.target.checked?"expired":"";r({type:"GET_TASKS",filter:t})}}),"filter expired")),n.a.createElement(U.a,{className:e.list},t.map(e=>n.a.createElement(X,{key:e.id,task:e,onTaskRemove:l,onTaskUpdate:c})),n.a.createElement($,{key:"add-task",isLoading:"syncing"===a,onTaskAdd:async e=>{r({type:"ADD_TASK",task:e})}})),n.a.createElement(de,{status:a}))};const je=(()=>{const e=Object(o.a)({reducer:u,devTools:!1,middleware:x});return g.run(A),e})();var me=()=>n.a.createElement(i.a,{store:je},n.a.createElement("div",{className:"App"},n.a.createElement(oe,null))),ue=a(55),pe=a(305),ye=a(219);var be=Object(ye.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:ue.a.A400},info:{main:pe.a.A400},background:{default:"#fafafa",paper:"#fff"}}});Object(r.render)(n.a.createElement(c.a,{theme:be},n.a.createElement(l.a,null),n.a.createElement(d.a,{maxWidth:"sm"},n.a.createElement(me,null))),document.getElementById("root"))}},[[231,1,2]]]);