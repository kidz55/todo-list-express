(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{233:function(e,t,a){e.exports=a(262)},259:function(e,t,a){var s={"./af":77,"./af.js":77,"./ar":78,"./ar-dz":79,"./ar-dz.js":79,"./ar-kw":80,"./ar-kw.js":80,"./ar-ly":81,"./ar-ly.js":81,"./ar-ma":82,"./ar-ma.js":82,"./ar-sa":83,"./ar-sa.js":83,"./ar-tn":84,"./ar-tn.js":84,"./ar.js":78,"./az":85,"./az.js":85,"./be":86,"./be.js":86,"./bg":87,"./bg.js":87,"./bm":88,"./bm.js":88,"./bn":89,"./bn-bd":90,"./bn-bd.js":90,"./bn.js":89,"./bo":91,"./bo.js":91,"./br":92,"./br.js":92,"./bs":93,"./bs.js":93,"./ca":94,"./ca.js":94,"./cs":95,"./cs.js":95,"./cv":96,"./cv.js":96,"./cy":97,"./cy.js":97,"./da":98,"./da.js":98,"./de":99,"./de-at":100,"./de-at.js":100,"./de-ch":101,"./de-ch.js":101,"./de.js":99,"./dv":102,"./dv.js":102,"./el":103,"./el.js":103,"./en-au":104,"./en-au.js":104,"./en-ca":105,"./en-ca.js":105,"./en-gb":106,"./en-gb.js":106,"./en-ie":107,"./en-ie.js":107,"./en-il":108,"./en-il.js":108,"./en-in":109,"./en-in.js":109,"./en-nz":110,"./en-nz.js":110,"./en-sg":111,"./en-sg.js":111,"./eo":112,"./eo.js":112,"./es":113,"./es-do":114,"./es-do.js":114,"./es-mx":115,"./es-mx.js":115,"./es-us":116,"./es-us.js":116,"./es.js":113,"./et":117,"./et.js":117,"./eu":118,"./eu.js":118,"./fa":119,"./fa.js":119,"./fi":120,"./fi.js":120,"./fil":121,"./fil.js":121,"./fo":122,"./fo.js":122,"./fr":123,"./fr-ca":124,"./fr-ca.js":124,"./fr-ch":125,"./fr-ch.js":125,"./fr.js":123,"./fy":126,"./fy.js":126,"./ga":127,"./ga.js":127,"./gd":128,"./gd.js":128,"./gl":129,"./gl.js":129,"./gom-deva":130,"./gom-deva.js":130,"./gom-latn":131,"./gom-latn.js":131,"./gu":132,"./gu.js":132,"./he":133,"./he.js":133,"./hi":134,"./hi.js":134,"./hr":135,"./hr.js":135,"./hu":136,"./hu.js":136,"./hy-am":137,"./hy-am.js":137,"./id":138,"./id.js":138,"./is":139,"./is.js":139,"./it":140,"./it-ch":141,"./it-ch.js":141,"./it.js":140,"./ja":142,"./ja.js":142,"./jv":143,"./jv.js":143,"./ka":144,"./ka.js":144,"./kk":145,"./kk.js":145,"./km":146,"./km.js":146,"./kn":147,"./kn.js":147,"./ko":148,"./ko.js":148,"./ku":149,"./ku.js":149,"./ky":150,"./ky.js":150,"./lb":151,"./lb.js":151,"./lo":152,"./lo.js":152,"./lt":153,"./lt.js":153,"./lv":154,"./lv.js":154,"./me":155,"./me.js":155,"./mi":156,"./mi.js":156,"./mk":157,"./mk.js":157,"./ml":158,"./ml.js":158,"./mn":159,"./mn.js":159,"./mr":160,"./mr.js":160,"./ms":161,"./ms-my":162,"./ms-my.js":162,"./ms.js":161,"./mt":163,"./mt.js":163,"./my":164,"./my.js":164,"./nb":165,"./nb.js":165,"./ne":166,"./ne.js":166,"./nl":167,"./nl-be":168,"./nl-be.js":168,"./nl.js":167,"./nn":169,"./nn.js":169,"./oc-lnc":170,"./oc-lnc.js":170,"./pa-in":171,"./pa-in.js":171,"./pl":172,"./pl.js":172,"./pt":173,"./pt-br":174,"./pt-br.js":174,"./pt.js":173,"./ro":175,"./ro.js":175,"./ru":176,"./ru.js":176,"./sd":177,"./sd.js":177,"./se":178,"./se.js":178,"./si":179,"./si.js":179,"./sk":180,"./sk.js":180,"./sl":181,"./sl.js":181,"./sq":182,"./sq.js":182,"./sr":183,"./sr-cyrl":184,"./sr-cyrl.js":184,"./sr.js":183,"./ss":185,"./ss.js":185,"./sv":186,"./sv.js":186,"./sw":187,"./sw.js":187,"./ta":188,"./ta.js":188,"./te":189,"./te.js":189,"./tet":190,"./tet.js":190,"./tg":191,"./tg.js":191,"./th":192,"./th.js":192,"./tk":193,"./tk.js":193,"./tl-ph":194,"./tl-ph.js":194,"./tlh":195,"./tlh.js":195,"./tr":196,"./tr.js":196,"./tzl":197,"./tzl.js":197,"./tzm":198,"./tzm-latn":199,"./tzm-latn.js":199,"./tzm.js":198,"./ug-cn":200,"./ug-cn.js":200,"./uk":201,"./uk.js":201,"./ur":202,"./ur.js":202,"./uz":203,"./uz-latn":204,"./uz-latn.js":204,"./uz.js":203,"./vi":205,"./vi.js":205,"./x-pseudo":206,"./x-pseudo.js":206,"./yo":207,"./yo.js":207,"./zh-cn":208,"./zh-cn.js":208,"./zh-hk":209,"./zh-hk.js":209,"./zh-mo":210,"./zh-mo.js":210,"./zh-tw":211,"./zh-tw.js":211};function n(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=259},262:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(13),c=a(311),l=a(312),d=a(313),i=a(39),o=a(60),j=a(223);a(212);const u={tasks:{},tasksCount:0,error:null,status:""};var m=(e=u,t)=>{switch(t.type){case"UPDATE_STATUS":return{...e,status:t.status};case"SET_TASKS":return{...e,tasksCount:t.tasks.count,tasks:t.tasks.rows.reduce((t,a)=>e.tasks[a.id]?(t[a.id]={...e.tasks[a.id],...a},t):(t[a.id]=a,t),{})};case"REMOVE_TASK":return{...e,tasks:Object.keys(e.tasks).filter(e=>e!==t.task.id).reduce((t,a)=>(t[a]=e.tasks[a],t),{})};case"UPDATE_TASK":return{...e,tasks:{...e.tasks,[t.task.id]:t.task}};case"TASK_REQ_FAILED":return{...e,error:t.error};default:return e}},y=a(12),p=a(213);var b=a.n(p).a.create({baseURL:"https://kidz-todo-list-backend.herokuapp.com/",headers:{Pragma:"no-cache"}}),E=a(2),k=a.n(E);function*f(e){const{query:t}=e;yield Object(y.c)({type:"UPDATE_STATUS",status:"syncing"});try{const{data:e}=yield Object(y.b)(b.get,"/tasks?"+(a=t,Object.keys(a).filter(e=>""!==a[e]).map(e=>`${e}=${a[e]}`).join("&")));yield Object(y.c)({type:"SET_TASKS",tasks:e}),yield Object(y.c)({type:"UPDATE_STATUS",status:"synced"})}catch(e){yield Object(y.c)({type:"TASK_REQ_FAILED",error:e}),yield Object(y.c)({type:"UPDATE_STATUS",status:"error"})}var a}function*T(e){const{task:t}=e;yield Object(y.c)({type:"UPDATE_STATUS",status:"syncing"});try{yield Object(y.b)(b.put,"/tasks/"+t.id,t),yield Object(y.c)({type:"UPDATE_STATUS",status:"synced"})}catch(e){yield Object(y.c)({type:"TASK_REQ_FAILED",error:e}),yield Object(y.c)({type:"UPDATE_STATUS",status:"error"})}}function*O(e){const{task:t,query:a}=e.payload;yield Object(y.c)({type:"UPDATE_STATUS",status:"syncing"});try{yield Object(y.b)(b.post,"/tasks",t),yield Object(y.c)({type:"GET_TASKS",query:a}),yield Object(y.c)({type:"UPDATE_STATUS",status:"synced"})}catch(e){yield Object(y.c)({type:"TASK_REQ_FAILED",error:e}),yield Object(y.c)({type:"UPDATE_STATUS",status:"error"})}}function*h(e){yield Object(y.c)({type:"UPDATE_STATUS",status:"syncing"});const{task:t}=e;try{yield Object(y.b)(b.delete,"/tasks/"+t.id),yield Object(y.c)({type:"UPDATE_STATUS",status:"synced"})}catch(e){yield Object(y.c)({type:"TASK_REQ_FAILED",error:e}),yield Object(y.c)({type:"UPDATE_STATUS",status:"error"})}}function*v(){yield Object(y.d)("GET_TASKS",f)}function*g(){yield Object(y.d)("UPDATE_TASK",T)}function*S(){yield Object(y.d)("ADD_TASK",O)}function*A(){yield Object(y.d)("REMOVE_TASK",h)}function*x(){yield Object(y.a)([v(),g(),A(),S()])}const U=Object(j.a)(),_=[...Object(o.b)({thunk:!1}),U];var D=a(300),w=a(304),z=a(316),C=a(315),N=a(305),L=a(306),P=a(317),K=a(307),R=a(217),I=a.n(R),F=a(216),M=a.n(F),q=a(215),Q=a.n(q),V=a(214),$=a.n(V),G=a(314);const J=Object(D.a)(()=>({form:{display:"flex",width:"100%",paddingRight:"3rem",flexDirection:"column"},textField:{paddingTop:"0.2.rem"}}));var B=({form:e,onUpdate:t,onError:a,isDirty:r})=>{const c=J(),l=Object(s.useMemo)(()=>((e={},t={})=>Object.entries(e).reduce((e,[a,s])=>{if(!t[a])return e;const n=t[a];return e[a]=!n(s),e},{}))(e,{title:e=>(e=>!!e||0===e)(e),deadLine:e=>(e=>!e||k()(e).isValid())(e)&&(e=>!e||k()(e).diff(k()(),"seconds")>0)(e)}),[e]);return Object(s.useEffect)(()=>{const e=Object.values(l).some(e=>e);a(e)},[l,a]),n.a.createElement("form",{autoComplete:"off",className:c.form},n.a.createElement(G.a,{"data-test-text-field-title":!0,placeholder:"Task title",required:!0,className:c.textField,error:l.title&&r,value:e.title,label:"title",onChange:a=>{t({...e,title:a.target.value})}}),n.a.createElement(G.a,{"data-test-text-field-desc":!0,placeholder:"Task description",label:"description",className:c.textField,value:e.description,onChange:a=>{t({...e,description:a.target.value})},multiline:!0,maxRows:4}),n.a.createElement(G.a,{"data-test-text-field-date":!0,id:"datetime-local",label:"Deadline",type:"datetime-local",className:c.textField,error:l.deadLine&&r,value:e.deadLine||"",onChange:a=>{t({...e,deadLine:a.target.value})},InputLabelProps:{shrink:!0}}))};var W=({deadLine:e,onCountdownOver:t})=>{const[a,r]=Object(s.useState)(k()(e).diff(k()(),"seconds"));Object(s.useEffect)(()=>{const t=k()(e);t.diff(k()(),"seconds")>0&&r(t.diff(k()(),"seconds"))},[e]),Object(s.useEffect)(()=>{if(!a)return void t();const e=setInterval(()=>{r(a-1)},1e3);return()=>clearInterval(e)},[a]);const c=Object(s.useMemo)(()=>{if(a<=0)return"expired";const e=k.a.duration(a,"seconds");let t="";return e.days()>0&&(t+=e.days()+"d:"),e.hours()>0&&(t+=e.hours()+"h:"),e.minutes()>0&&(t+=e.minutes()+"m:"),e.seconds()>0&&(t+=e.seconds()+"s"),t},[a]);return n.a.createElement("small",null,a>0?"Time left: "+c:"Expired")};const H=Object(D.a)(()=>({root:{padding:"1rem"},expired:{backgroundColor:"#D3D3D3"},completed:{textDecoration:"line-through"},secondaryActions:{marginLeft:"auto"}}));var X=({task:e,onTaskUpdate:t,onTaskRemove:a})=>{const r=H(),[c,l]=Object(s.useState)(!1),[d,i]=Object(s.useState)(e),[o,j]=Object(s.useState)(!1),[u,m]=Object(s.useState)(!1);Object(s.useEffect)(()=>{i(e)},[e]);const y=()=>{l(!c)},p=Object(s.useMemo)(()=>"expired"===d.status,[d]);return n.a.createElement(N.a,{className:`${r.root} ${p?r.expired:""}`,key:d.id,dense:!0,divider:!0,"data-test-item-todo":!0},n.a.createElement(L.a,null,n.a.createElement(z.a,{"data-test-item-checkbox":!0,checked:"completed"===d.status,disabled:p,onChange:()=>{t({...d,status:"completed"===d.status?"incomplete":"completed"})},inputProps:{"aria-labelledby":d.id}})),c?n.a.createElement(B,{"data-text-item-form":!0,form:d,onError:j,isDirty:u,onUpdate:i}):n.a.createElement("div",null,n.a.createElement(P.a,{"data-text-item-text":!0,className:"completed"===d.status?r.completed:"",primary:d.title,secondary:d.description}),!!d.deadLine&&"completed"!==d.status&&n.a.createElement(W,{onCountdownOver:()=>{t({...d,status:"expired"})},deadLine:d.deadLine})),n.a.createElement("div",{className:r.secondaryActions},n.a.createElement(K.a,{"data-text-item-remove":!0,onClick:()=>{a(d)}},n.a.createElement(Q.a,null)),n.a.createElement("div",null,!p&&n.a.createElement("div",null,c?n.a.createElement(K.a,{"data-text-item-save":!0,onClick:()=>{m(!0),o||(m(!1),$()(d,e)||t(d),y())},edge:"end","aria-label":"save"},n.a.createElement(M.a,null)):n.a.createElement(K.a,{"data-text-item-edit":!0,onClick:()=>y(),edge:"end","aria-label":"edit"},n.a.createElement(I.a,null))))))},Y=a(218),Z=a.n(Y),ee=a(308);var te=({onTaskAdd:e})=>{const t={title:"",status:"incomplete",description:""},[a,r]=Object(s.useState)(t),[c,l]=Object(s.useState)(!1),[d,i]=Object(s.useState)(!1);return n.a.createElement(N.a,{key:"new-task","data-test-add-item":!0},n.a.createElement(B,{"data-test-add-task-form":!0,form:a,onError:l,isDirty:d,onUpdate:r}),n.a.createElement(ee.a,null,n.a.createElement(K.a,{"data-test-add-task-button":!0,onClick:()=>{i(!0),c||(e(a),r(t),i(!1))},"aria-label":"add"},n.a.createElement(Z.a,null))))},ae=a(219),se=a.n(ae),ne=a(221),re=a.n(ne),ce=a(309),le=a(220),de=a.n(le);const ie=Object(D.a)(()=>({root:{display:"flex",padding:"1rem"},wrapper:{display:"flex",alignContent:"center"},text:{marginLeft:"0.2rem"}}));var oe=({status:e})=>{const t=ie();return n.a.createElement("div",{className:t.root},(()=>{switch(e){case"syncing":return n.a.createElement("div",{className:t.wrapper},n.a.createElement(ce.a,{size:20}),n.a.createElement("span",{className:t.text},"Syncing"));case"synced":return n.a.createElement("div",{className:t.wrapper},n.a.createElement(se.a,{color:"secondary"}),n.a.createElement("span",{className:t.text},"Synced"));case"unsynced":return n.a.createElement("div",{className:t.wrapper},n.a.createElement(de.a,{color:"action"}),n.a.createElement("span",{className:t.text},"Unsynced"));case"error":return n.a.createElement("div",{className:t.wrapper},n.a.createElement(re.a,{color:"error"}),n.a.createElement("span",{className:t.text},"Error during syncing"));default:return null}})())};const je=Object(D.a)(e=>({list:{width:"100%",backgroundColor:e.palette.background.paper},header:{display:"flex",justifyContent:"space-between",alignItems:"center"},footer:{display:"flex",justifyContent:"space-between",alignItems:"center"}}));var ue=()=>{const e=je(),t=Object(i.c)(e=>Object.values(e.tasks)),a=Object(i.c)(e=>e.tasksCount),r=Object(i.c)(e=>e.status),c=Object(i.b)(),l=Object(s.useMemo)(()=>Math.ceil(a/10),[a]),[d,o]=Object(s.useState)({});Object(s.useEffect)(()=>{c({type:"GET_TASKS",query:d})},[d,c]);const j=e=>{c({type:"UPDATE_TASK",task:e})},u=e=>{window.confirm("Are you sure you want to delete task?")&&c({type:"REMOVE_TASK",task:e})};return n.a.createElement("div",null,n.a.createElement("div",{className:e.header},n.a.createElement("h1",null,"TODO LIST"),n.a.createElement("div",null,n.a.createElement(z.a,{onChange:e=>{const t=e.target.checked?"expired":"";o({...d,filter:t})}}),"filter expired")),n.a.createElement(w.a,{className:e.list},t.map(e=>n.a.createElement(X,{key:e.id,task:e,onTaskRemove:u,onTaskUpdate:j})),n.a.createElement(te,{key:"add-task",isLoading:"syncing"===r,onTaskAdd:async e=>{c({type:"ADD_TASK",payload:{task:e,query:d}})}})),n.a.createElement("div",{className:e.footer},n.a.createElement(oe,{status:r}),l>1&&n.a.createElement(C.a,{onChange:(e,t)=>{o({...d,page:t})},count:l})))};const me=(()=>{const e=Object(o.a)({reducer:m,devTools:!1,middleware:_});return U.run(x),e})();var ye=()=>n.a.createElement(i.a,{store:me},n.a.createElement(ue,null)),pe=a(57),be=a(310),Ee=a(222);var ke=Object(Ee.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:pe.a.A400},info:{main:be.a.A400},background:{default:"#fafafa",paper:"#fff"}}});Object(r.render)(n.a.createElement(c.a,{theme:ke},n.a.createElement(l.a,null),n.a.createElement(d.a,{maxWidth:"sm"},n.a.createElement(ye,null))),document.getElementById("root"))}},[[233,1,2]]]);