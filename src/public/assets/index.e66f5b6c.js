(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),s=a(12),n=a(171),l=a(172),d=a(173),i=a(42),o=a(57),u=a(83);a(72);const m={tasks:{},error:null,status:""};var y=(e=m,t)=>{switch(t.type){case"UPDATE_STATUS":return{...e,status:t.status};case"SET_TASKS":return{...e,tasks:t.tasks.reduce((t,a)=>e.tasks[a.id]?(t[a.id]={...e.tasks[a.id],...a},t):(t[a.id]=a,t),{})};case"REMOVE_TASK":return{...e,tasks:Object.keys(e.tasks).filter(e=>e!==t.task.id).reduce((t,a)=>(t[a]=e.tasks[a],t),{})};case"UPDATE_TASK":return{...e,tasks:{...e.tasks,[t.task.id]:t.task}};case"TASK_REQ_FAILED":return{...e,error:t.error};default:return e}},E=a(10),p=a(73);var b=a.n(p).a.create({baseURL:"https://kidz-todo-list-backend.herokuapp.com/",headers:{Pragma:"no-cache"}});function*T(){yield Object(E.d)({type:"UPDATE_STATUS",status:"syncing"});try{const{data:e}=yield Object(E.b)(b.get,"/tasks");yield Object(E.d)({type:"SET_TASKS",tasks:e}),yield Object(E.d)({type:"UPDATE_STATUS",status:"synced"})}catch(e){yield Object(E.d)({type:"TASK_REQ_FAILED",error:e}),yield Object(E.d)({type:"UPDATE_STATUS",status:"error"})}}function*O(e){const{task:t}=e;yield Object(E.c)(500),yield Object(E.d)({type:"UPDATE_STATUS",status:"syncing"});try{yield Object(E.b)(b.put,"/tasks/"+t.id,t),yield Object(E.d)({type:"UPDATE_STATUS",status:"synced"})}catch(e){yield Object(E.d)({type:"TASK_REQ_FAILED",error:e}),yield Object(E.d)({type:"UPDATE_STATUS",status:"error"})}}function*S(e){const{task:t}=e;yield Object(E.c)(500),yield Object(E.d)({type:"UPDATE_STATUS",status:"syncing"});try{yield Object(E.b)(b.post,"/tasks",t),yield Object(E.d)({type:"GET_TASKS"}),yield Object(E.d)({type:"UPDATE_STATUS",status:"synced"})}catch(e){yield Object(E.d)({type:"TASK_REQ_FAILED",error:e}),yield Object(E.d)({type:"UPDATE_STATUS",status:"error"})}}function*k(e){yield Object(E.c)(500),yield Object(E.d)({type:"UPDATE_STATUS",status:"syncing"});const{task:t}=e;try{yield Object(E.b)(b.delete,"/tasks/"+t.id),yield Object(E.d)({type:"UPDATE_STATUS",status:"synced"})}catch(e){yield Object(E.d)({type:"TASK_REQ_FAILED",error:e}),yield Object(E.d)({type:"UPDATE_STATUS",status:"error"})}}function*A(){yield Object(E.e)("GET_TASKS",T)}function*j(){yield Object(E.e)("UPDATE_TASK",O)}function*f(){yield Object(E.e)("ADD_TASK",S)}function*U(){yield Object(E.e)("REMOVE_TASK",k)}function*_(){yield Object(E.a)([A(),j(),U(),f()])}const v=Object(u.a)(),D=[...Object(o.b)({thunk:!1}),v];var g=a(164),h=a(163),x=a(165),w=a(166),K=a(176),P=a(168),R=a(167),N=a(77),C=a.n(N),L=a(76),I=a.n(L),F=a(175),Q=a(75),M=a.n(Q),G=a(74),V=a.n(G),z=a(174);var J=({form:e,onUpdate:t,onError:a,isDirty:s})=>{const n=Object(r.useMemo)(()=>((e={},t={})=>Object.entries(e).reduce((e,[a,r])=>{if(!t[a])return e;const c=t[a];return e[a]=!c(r),e},{}))(e,{title:e=>(e=>!!e||0===e)(e)}),[e]);return Object(r.useEffect)(()=>{const e=Object.values(n).some(e=>e);a(e)},[n,a]),c.a.createElement("form",{autoComplete:"off"},c.a.createElement(z.a,{"data-test-text-field-title":!0,placeholder:"Task title",required:!0,error:n.title&&s,value:e.title,label:"title",onChange:a=>{t({...e,title:a.target.value})}}),c.a.createElement(z.a,{"data-test-text-field-desc":!0,placeholder:"Task description",label:"description",value:e.description,onChange:a=>{t({...e,description:a.target.value})},multiline:!0,maxRows:4}))};const W=Object(g.a)(()=>({completed:{textDecoration:"line-through"}}));var q=({task:e,onTaskUpdate:t,onTaskRemove:a})=>{const s=W(),[n,l]=Object(r.useState)(!1),[d,i]=Object(r.useState)(e),[o,u]=Object(r.useState)(!1),[m,y]=Object(r.useState)(!1);Object(r.useEffect)(()=>{i(e)},[e]);const E=()=>{l(!n)};return c.a.createElement(x.a,{key:d.id,dense:!0,divider:!0,"data-test-item-todo":!0},c.a.createElement(w.a,null,c.a.createElement(F.a,{"data-test-item-checkbox":!0,edge:"start",checked:"completed"===d.status,tabIndex:-1,disableRipple:!0,onChange:()=>{t({...d,status:"completed"===d.status?"incomplete":"completed"})},inputProps:{"aria-labelledby":d.id}})),n?c.a.createElement(J,{"data-text-item-form":!0,form:d,onError:u,isDirty:m,onUpdate:i}):c.a.createElement(K.a,{"data-text-item-text":!0,className:"completed"===d.status?s.completed:"",primary:d.title,secondary:d.description}),c.a.createElement(P.a,null,c.a.createElement(R.a,{"data-text-item-remove":!0,onClick:()=>{a(d)}},c.a.createElement(M.a,null)),n?c.a.createElement(R.a,{"data-text-item-save":!0,onClick:()=>{y(!0),o||(y(!1),V()(d,e)||t(d),E())},edge:"end","aria-label":"save"},c.a.createElement(I.a,null)):c.a.createElement(R.a,{"data-text-item-edit":!0,onClick:()=>E(),edge:"end","aria-label":"edit"},c.a.createElement(C.a,null))))},B=a(78),H=a.n(B);var X=({onTaskAdd:e})=>{const t={title:"",status:"incomplete",description:""},[a,s]=Object(r.useState)(t),[n,l]=Object(r.useState)(!1),[d,i]=Object(r.useState)(!1);return c.a.createElement(x.a,{key:"new-task",dense:!0,autoFocus:!0,"data-test-add-item":!0},c.a.createElement(w.a,null,c.a.createElement(R.a,{"data-test-add-task-button":!0,onClick:()=>{i(!0),n||(e(a),s(t),i(!1))},"aria-label":"add"},c.a.createElement(H.a,null))),c.a.createElement(J,{"data-test-add-task-form":!0,form:a,onError:l,isDirty:d,onUpdate:s}))},Y=a(79),Z=a.n(Y),$=a(81),ee=a.n($),te=a(169),ae=a(80),re=a.n(ae);const ce=Object(g.a)(()=>({root:{display:"flex",padding:"1rem"},wrapper:{display:"flex",alignContent:"center"},text:{marginLeft:"0.2rem"}}));var se=({status:e})=>{const t=ce();return c.a.createElement("div",{className:t.root},(()=>{switch(e){case"syncing":return c.a.createElement("div",{className:t.wrapper},c.a.createElement(te.a,{size:20}),c.a.createElement("span",{className:t.text},"Syncing"));case"synced":return c.a.createElement("div",{className:t.wrapper},c.a.createElement(Z.a,{color:"secondary"}),c.a.createElement("span",{className:t.text},"Synced"));case"unsynced":return c.a.createElement("div",{className:t.wrapper},c.a.createElement(re.a,{color:"action"}),c.a.createElement("span",{className:t.text},"Unsynced"));case"error":return c.a.createElement("div",{className:t.wrapper},c.a.createElement(ee.a,{color:"error"}),c.a.createElement("span",{className:t.text},"Error during syncing"));default:return null}})())};const ne=Object(g.a)(e=>({root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}));var le=()=>{const e=ne(),t=Object(i.c)(e=>Object.values(e.tasks)),a=Object(i.c)(e=>e.status),s=Object(i.b)();Object(r.useEffect)(()=>{s({type:"GET_TASKS"})},[s]);const n=e=>{s({type:"UPDATE_TASK",task:e})},l=e=>{window.confirm("Are you sure you want to delete task?")&&s({type:"REMOVE_TASK",task:e})};return c.a.createElement("div",null,c.a.createElement("h1",null,"TODO LIST"),c.a.createElement(h.a,{className:e.root},t.map(e=>c.a.createElement(q,{key:e.id,task:e,onTaskRemove:l,onTaskUpdate:n})),c.a.createElement(X,{key:"add-task",isLoading:"syncing"===a,onTaskAdd:async e=>{s({type:"ADD_TASK",task:e})}})),c.a.createElement(se,{status:a}))};const de=(()=>{const e=Object(o.a)({reducer:y,devTools:!1,middleware:D});return v.run(_),e})();var ie=()=>c.a.createElement(i.a,{store:de},c.a.createElement("div",{className:"App"},c.a.createElement(le,null))),oe=a(54),ue=a(170),me=a(82);var ye=Object(me.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:oe.a.A400},info:{main:ue.a.A400},background:{default:"#fafafa",paper:"#fff"}}});Object(s.render)(c.a.createElement(n.a,{theme:ye},c.a.createElement(l.a,null),c.a.createElement(d.a,{maxWidth:"sm"},c.a.createElement(ie,null))),document.getElementById("root"))},93:function(e,t,a){e.exports=a(122)}},[[93,1,2]]]);